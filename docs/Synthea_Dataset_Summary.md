# Synthea 合成病患資料集總結

## 📅 文件資訊
- **建立日期**: 2025-09-30
- **資料版本**: Synthea 1K Sample (Latest Version)
- **資料來源**: https://synthea.mitre.org/downloads
- **授權**: CC-BY-NC 4.0

---

## 📊 資料集概述

### 基本統計

| 項目 | 數量 | 說明 |
|------|------|------|
| **總病患數** | 1,163 人 | 包含完整人口學資訊 |
| **觀察記錄數** | 531,144 筆 | 包含所有生物標記測量 |
| **診斷記錄數** | 38,094 筆 | 包含所有疾病診斷 |
| **就診記錄數** | 約 19 萬筆 | encounters.csv |
| **用藥記錄數** | 約 14 萬筆 | medications.csv |
| **平均每位病患觀察記錄** | 457 筆 | 高密度縱向資料 |

---

## 🎯 縱向追蹤能力分析

### 追蹤次數分布

| 追蹤次數 | 病患數 | 百分比 | 適用性 |
|---------|--------|--------|--------|
| **≥ 3 次** | **1,155 人** | **99.3%** | ✅ **符合研究需求** |
| ≥ 5 次 | 1,063 人 | 91.4% | ✅ 可進行長期預測 |
| ≥ 10 次 | 809 人 | 69.6% | ✅ 可分析疾病進展 |
| ≥ 15 次 | 約 500 人 | 43% | ✅ 可進行深度縱向分析 |

### 追蹤特性

- **追蹤次數中位數**: 11 次
- **追蹤次數最多**: 222 次
- **平均追蹤間隔**: 約 1 年（334-372 天）
- **追蹤期間**: 2011-2024（最長達 13 年）

### 就診模式

**典型年度健康檢查模式**：
```
完整健檢年份: 血壓 + 血糖 + HbA1c + 血脂全套（7 項）
簡易追蹤年份: 血壓 + 血糖 + HbA1c（4 項）
最簡追蹤年份: 血壓（2 項）
```

**關鍵發現**：
- ✅ 同一天進行多項檢驗（減少時間對齊問題）
- ✅ 穩定的年度間隔（適合時間序列建模）
- ✅ 真實反映臨床健檢實務

---

## 🩺 三高相關變數完整性

### 生物標記測量（observations.csv）

| 檢驗項目 | LOINC Code | 記錄數 | 說明 |
|---------|-----------|--------|------|
| **血壓** | | | |
| 收縮壓 (Systolic BP) | 8480-6 | 14,467 | 每次就診都測量 |
| 舒張壓 (Diastolic BP) | 8462-4 | 14,467 | 每次就診都測量 |
| **血糖** | | | |
| 血糖 (Glucose) | 2339-0 | 6,435 | 空腹血糖 |
| 糖化血色素 (HbA1c) | 4548-4 | 4,780 | 長期血糖控制指標 |
| **血脂** | | | |
| 總膽固醇 (Total Cholesterol) | 2093-3 | 5,398 | 心血管風險指標 |
| 低密度脂蛋白 (LDL) | 18262-6 | 5,398 | 壞膽固醇 |
| 三酸甘油酯 (Triglycerides) | 2571-8 | 5,398 | 血脂異常指標 |
| **其他** | | | |
| BMI | 39156-5 | 包含 | 肥胖指標 |
| 體重 (Weight) | 29463-7 | 包含 | 身體測量 |
| 身高 (Height) | 8302-2 | 包含 | 身體測量 |

**總計三高相關檢驗**: 56,563 筆

---

## 🏥 三高診斷統計（conditions.csv）

### 主要診斷分布

| 診斷 | SNOMED Code | 病患數 | 盛行率 |
|------|------------|--------|--------|
| **糖尿病前期** | 714628002 | 341 | 29.3% |
| **高血壓** | 59621000 | 292 | 25.1% |
| **高血脂** | 55822004 | 138 | 11.9% |
| **第二型糖尿病** | 44054006 | 73 | 6.3% |
| **糖尿病神經病變** | - | 24 | 2.1% |
| **糖尿病視網膜病變** | - | 21 | 1.8% |

### 綜合統計

- **有三高診斷的病患**: 584 人（50.2%）
- **僅糖尿病前期**: 341 人（29.3%）
- **確診三高之一**: 約 350 人（30%）
- **多重診斷**: 約 150 人（12.9%）

---

## 📁 資料檔案結構

### 關鍵檔案說明

| 檔案名稱 | 記錄數 | 檔案大小 | 用途 |
|---------|--------|---------|------|
| **patients.csv** | 1,163 | 330 KB | 病患基本資料（年齡、性別、種族） |
| **observations.csv** | 531,144 | 88 MB | **核心檔案**: 所有生物標記測量 |
| **conditions.csv** | 38,094 | 4.9 MB | **核心檔案**: 疾病診斷記錄 |
| **encounters.csv** | ~190,000 | 19 MB | 就診記錄（時間點） |
| **medications.csv** | ~140,000 | 14 MB | 用藥記錄（含降壓/降糖/降脂藥） |
| careplans.csv | 6,000+ | 740 KB | 照護計畫 |
| procedures.csv | ~150,000 | 15 MB | 醫療處置 |
| immunizations.csv | 23,000+ | 2.4 MB | 疫苗接種 |
| allergies.csv | 2,800+ | 140 KB | 過敏史 |

**總資料量**: 539 MB（未壓縮）

---

## ✅ 研究適用性評估

### 符合需求檢核表

| 需求項目 | 狀態 | 說明 |
|---------|------|------|
| ✅ 個案編號 | **完全符合** | 每位病患有唯一 UUID |
| ✅ 年齡、性別 | **完全符合** | patients.csv 包含出生日期、性別 |
| ✅ 血壓 | **完全符合** | 14,467 筆記錄 |
| ✅ 血糖 | **完全符合** | 11,215 筆記錄（Glucose + HbA1c） |
| ✅ 血脂 | **完全符合** | 16,194 筆記錄（TC + LDL + TG） |
| ✅ 三高診斷標記 | **完全符合** | 584 位病患有診斷 |
| ✅ **至少 3 次追蹤** | **99.3% 符合** | **1,155/1,163 位病患** |
| ✅ 縱向時間序列 | **完全符合** | 平均 11 次追蹤，間隔穩定 |
| ✅ 用藥資訊 | **額外優勢** | 可識別服藥控制的病患 |

### 研究優勢

#### 1. **資料品質高**
- ✅ 無缺失值問題（合成資料）
- ✅ 標準化格式（LOINC, SNOMED CT）
- ✅ 時間戳記完整

#### 2. **縱向追蹤完整**
- ✅ 99.3% 病患有 3+ 次記錄
- ✅ 追蹤期間長（最長 13 年）
- ✅ 間隔穩定（約 1 年）

#### 3. **變數豐富**
- ✅ 包含所有三高必要指標
- ✅ 額外包含 BMI、用藥等
- ✅ 可分析多重共病

#### 4. **無隱私問題**
- ✅ 合成資料，不含真實個人資訊
- ✅ 可公開分享研究結果
- ✅ 無需複雜申請程序

#### 5. **可擴展性**
- ✅ 如需更多資料，可自行生成
- ✅ 可客製化疾病模組
- ✅ 可控制樣本特性

---

## 🎯 應用於本研究（Meeting 14 Q1）

### 研究問題
**用前兩次檢查結果預測第三次的三高風險**

### 資料適配性分析

#### ✅ **Inputs: 前兩次的檢查結果**
```
Time 1 (T₁):
  - 血壓: 120/80 mmHg
  - 血糖: 90 mg/dL, HbA1c: 5.5%
  - 血脂: TC=180, LDL=100, TG=120 mg/dL
  - 年齡: 45 歲
  - BMI: 24.5

Time 2 (T₂): 約 1 年後
  - 血壓: 125/82 mmHg
  - 血糖: 95 mg/dL, HbA1c: 5.7%
  - 血脂: TC=190, LDL=110, TG=130 mg/dL
  - 年齡: 46 歲
  - BMI: 25.2
```

#### ✅ **Outputs: 未來三高的風險**
```
Time 3 (T₃): 約 1 年後
  - 預測: 高血壓風險 = ?
  - 預測: 糖尿病風險 = ?
  - 預測: 高血脂風險 = ?
```

#### 可用樣本數估算

**保守估計**（需要至少 3 次完整檢測）:
- 基礎樣本: 1,155 人有 3+ 次記錄
- 平均每人可生成: 9 個訓練樣本（11-2次）
- **總訓練樣本數**: 約 10,000+ 個時間序列樣本

**實際上**:
- 809 人有 10+ 次記錄
- 可進行更長期的預測建模
- 可分析 3年、5年的風險預測

---

## 📊 範例資料預覽

### 病患基本資料範例（patients.csv）

```csv
Id,BIRTHDATE,GENDER,RACE,ETHNICITY
cce6e242-...,1984-06-14,M,white,nonhispanic
93e0790b-...,2016-10-07,F,white,nonhispanic
```

### 觀察記錄範例（observations.csv）

```csv
DATE,PATIENT,CODE,DESCRIPTION,VALUE,UNITS
2018-08-30,cce6e242-...,8480-6,Systolic Blood Pressure,127.0,mm[Hg]
2018-08-30,cce6e242-...,8462-4,Diastolic Blood Pressure,75.0,mm[Hg]
2018-08-30,cce6e242-...,2339-0,Glucose,92.8,mg/dL
2018-08-30,cce6e242-...,4548-4,Hemoglobin A1c,6.0,%
2018-08-30,cce6e242-...,2093-3,Cholesterol,173.5,mg/dL
```

### 診斷記錄範例（conditions.csv）

```csv
START,PATIENT,CODE,DESCRIPTION
2018-08-30,cce6e242-...,714628002,Prediabetes
1986-03-11,0414d176-...,59621000,Essential hypertension
2021-05-21,756029b0-...,55822004,Hyperlipidemia
```

---

## 🔄 資料處理建議

### 下一步工作

#### 1. **資料整合** (Data Integration)
```python
# 需要合併的檔案
- patients.csv (基本資料)
- observations.csv (生物標記)
- conditions.csv (診斷)
- medications.csv (用藥)
- encounters.csv (就診時間點)
```

#### 2. **特徵工程** (Feature Engineering)
- 計算 BMI
- 定義三高診斷標準
- 計算時間差
- 創建時間窗口特徵

#### 3. **資料集切分** (Dataset Split)
- 訓練集: 70%
- 驗證集: 15%
- 測試集: 15%
- **注意**: 依病患ID切分，避免資料洩漏

#### 4. **建立時間序列資料格式**
```
[T₁, T₂] → T₃ 的預測格式
每個病患可產生多個訓練樣本
```

---

## 🚨 注意事項

### 資料特性

1. **合成資料限制**
   - 雖然逼真，但非真實病患資料
   - 疾病模型基於文獻，可能不完全符合台灣人群
   - 發表論文時需說明使用合成資料

2. **種族/地域差異**
   - 資料基於美國人口模型
   - 疾病盛行率可能與台灣不同
   - 建議與台灣資料比較驗證

3. **診斷定義**
   - 使用 SNOMED CT 編碼
   - 需確認診斷標準與臨床實務一致
   - 可能需要根據生物標記值重新定義

### 資料管理

1. **版本控制**
   - ✅ 資料檔案已加入 .gitignore
   - ✅ 透過 README 提供下載連結
   - ✅ 確保研究可重現

2. **儲存空間**
   - 原始資料: 539 MB
   - 建議定期備份
   - 處理後的資料另存

---

## 📚 參考資源

### 官方文件
- [Synthea 官方網站](https://synthea.mitre.org/)
- [Synthea GitHub](https://github.com/synthetichealth/synthea)
- [Synthea Wiki](https://github.com/synthetichealth/synthea/wiki)

### 標準編碼系統
- [LOINC (Laboratory Observations)](https://loinc.org/)
- [SNOMED CT (診斷編碼)](https://www.snomed.org/)
- [ICD-10 對照](https://www.cdc.gov/nchs/icd/icd-10-cm.htm)

### 相關研究
- Walonoski J, et al. (2018). "Synthea: An approach, method, and software mechanism for generating synthetic patients and the synthetic electronic health care record." Journal of the American Medical Informatics Association.

---

## 📝 更新紀錄

| 日期 | 版本 | 更新內容 |
|------|------|---------|
| 2025-09-30 | 1.0 | 初始版本，完成資料集下載和基本分析 |

---

## 🎓 總結

Synthea 1K 合成病患資料集**完全符合**本研究的需求：

✅ **樣本量充足**: 1,163 位病患，99.3% 有 3+ 次追蹤
✅ **縱向追蹤完整**: 平均 11 次追蹤，間隔穩定約 1 年
✅ **變數齊全**: 包含所有三高相關生物標記和診斷
✅ **資料品質高**: 標準化格式，無缺失值問題
✅ **易於取得**: 無需複雜申請，可立即使用

**可直接用於實現 Meeting 14 Q1 的研究目標**: 用前兩次檢查結果預測未來三高風險。

---

*文件建立: 2025-09-30*
*資料版本: Synthea 1K Sample (Latest Version)*
*分析工具: Python pandas*