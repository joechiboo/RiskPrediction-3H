# Problem Definition
# 問題定義

**文檔建立日期**: 2025-11-24
**研究主題**: 基於縱向健檢資料的三高疾病預測
**研究者**: 紀伯喬

---

## 1. 研究背景 (Background)

### 1.1 三高疾病的公共衛生重要性

**三高疾病**（高血壓、高血糖、高血脂）是全球主要的慢性疾病：

- **高血壓 (Hypertension)**
  - 全球患病率：30-40%
  - 主要併發症：心血管疾病、中風、腎臟疾病
  - 台灣盛行率：約 25%（2019 年國健署資料）

- **高血糖 (Hyperglycemia) / 糖尿病**
  - 全球患病率：9.3%（2019 IDF 資料）
  - 主要併發症：視網膜病變、腎病變、神經病變
  - 台灣盛行率：約 11%（2019 年）

- **高血脂 (Dyslipidemia)**
  - 全球患病率：估計 20-40%
  - 主要併發症：動脈硬化、心肌梗塞、中風
  - 台灣盛行率：約 21%（2017-2020 年國健署資料）

### 1.2 早期預測的臨床價值

慢性疾病的特點：
1. **早期症狀不明顯**：患者往往不自覺
2. **進程緩慢**：從健康到發病可能需要數年
3. **可預防性高**：早期介入可有效延緩或避免發病
4. **醫療成本高**：晚期治療成本遠高於早期預防

**早期預測的價值**：
- ✅ 及早發現高風險個體
- ✅ 提供個人化預防建議
- ✅ 降低醫療成本
- ✅ 提升生活品質

### 1.3 現有預測方法的限制

**傳統風險評估方法**：
1. **單時間點評估**
   - 僅使用當前檢驗數據
   - 無法捕捉健康狀態的動態變化
   - 例：使用當前 FBG 判斷糖尿病風險

2. **簡單評分系統**
   - Framingham Risk Score
   - SCORE (Systematic Coronary Risk Evaluation)
   - 僅考慮少數固定因子
   - 缺乏個人化

3. **缺乏縱向資訊**
   - 忽略健康軌跡變化
   - 無法利用歷史檢驗資料
   - 預測準確度受限

**現有機器學習研究的限制**：
1. **特徵工程不足**
   - 大多僅使用基線特徵
   - 未充分利用時間序列資訊
   - 缺少變化量特徵（Δ features）

2. **模型可解釋性不足**
   - 黑箱模型難以被醫療人員信任
   - 缺乏臨床可操作性
   - 無法提供風險因子的明確指引

3. **單一疾病預測**
   - 大多僅針對單一疾病（如糖尿病）
   - 忽略三高疾病的共病性
   - 缺乏全面的代謝風險評估

---

## 2. 問題陳述 (Problem Statement)

### 2.1 核心研究問題

**如何利用縱向健檢資料，有效預測個體在未來時間點罹患三高疾病的風險？**

### 2.2 具體研究問題

**Q1: 縱向變化特徵的價值**
> 相較於單時間點的特徵，縱向變化量特徵（Δ features）是否能顯著提升三高疾病的預測性能？

**Q2: 模型選擇與比較**
> 在三高疾病預測任務中，哪些機器學習模型（從傳統到深度學習）表現最佳？可解釋模型與黑箱模型的性能差異為何？

**Q3: 多任務學習的效果**
> 同時預測三高疾病（Multi-Task Learning）是否優於分別預測單一疾病（Single-Task Learning）？

**Q4: 特徵重要性分析**
> 哪些生物標記及其變化量對三高疾病預測最為重要？這些發現如何支持臨床決策？

**Q5: 時間點選擇策略**
> 使用健檢資料的前三次 vs 後三次，對預測性能有何影響？哪種策略更適合早期預警？

**Q6: 檢驗次數的影響**
> 增加時間點數量（從 3 次到 5 次以上）是否能提升預測性能？邊際效應為何？

---

## 3. 研究目標 (Research Objectives)

### 3.1 主要目標

**建立一個基於縱向健檢資料的三高疾病預測系統，能夠：**
1. 準確預測個體在未來時間點（Y）罹患三高疾病的風險
2. 利用時間序列資訊（Y-2→Y-1 的變化）提升預測性能
3. 提供可解釋的預測結果，支持臨床決策

### 3.2 次要目標

1. **特徵工程創新**
   - 設計並驗證縱向變化量特徵（Δ features）的有效性
   - 探索不同時間窗口的特徵組合

2. **模型比較研究**
   - 系統性比較 6 種以上的機器學習模型
   - 評估可解釋性與預測性能的權衡

3. **多任務學習探索**
   - 驗證同時預測三高疾病的 MTL 架構
   - 分析任務間的共享特徵與獨立特徵

4. **臨床應用指引**
   - 識別高風險族群的關鍵特徵
   - 提供個人化健康管理建議

---

## 4. 研究範圍 (Scope)

### 4.1 預測目標

**三高疾病定義**：

| 疾病 | 診斷標準 | 依據 |
|------|---------|------|
| **高血壓** | SBP ≥ 140 mmHg 或 DBP ≥ 90 mmHg | 2020 台灣高血壓治療指引 |
| **高血糖** | FBG ≥ 100 mg/dL | ADA 2023 糖尿病診斷標準 |
| **高血脂** | TC ≥ 200 mg/dL | 2019 台灣血脂治療指引 |

**預測任務類型**：
- 二元分類（Binary Classification）
- 預測時間點：Y（第三次健檢）
- 訓練資料：Y-2, Y-1 及其變化量

### 4.2 資料範圍

**縱向健檢資料集**：
- **樣本數**：6,056 人（篩選後）
- **時間點**：至少 3 次健檢記錄
- **特徵數**：26 個
  - 人口統計：性別、年齡
  - 生物標記（8 項）：FBG, TC, Cr, UA, GFR, BMI, SBP, DBP
  - 時間點：Y-2, Y-1（各 8 項）
  - 變化量：Δ = Y-1 - Y-2（8 項）

**資料來源**：
- 縱向健康檢查資料庫
- 時間跨度：多年追蹤
- 資料品質：高（98.97% 完整記錄）

### 4.3 模型範圍

**涵蓋的機器學習方法**：
1. **傳統統計模型**：Logistic Regression (LR)
2. **樹模型**：Decision Tree (DT), Random Forest (RF)
3. **梯度提升**：XGBoost
4. **深度學習**：Artificial Neural Network (ANN)
5. **演化計算**：Genetic Programming (GP)
6. **多任務學習**：Multi-Task Learning (MTL) 架構

### 4.4 研究限制

**不涵蓋的範圍**：
- ❌ 其他慢性疾病（如癌症、心臟病）
- ❌ 用藥史或治療資料
- ❌ 生活習慣資料（飲食、運動、吸煙）
- ❌ 基因資料
- ❌ 影像資料（X 光、CT、MRI）

**資料限制**：
- ⚠️ 僅包含健檢族群（可能有選擇偏差）
- ⚠️ 時間間隔不完全一致
- ⚠️ 類別嚴重不平衡（高血糖、高血脂 < 6%）

---

## 5. 成功標準 (Success Criteria)

### 5.1 定量指標

**預測性能目標**：

| 指標 | 目標值 | 優秀值 | 說明 |
|------|--------|--------|------|
| **AUC-ROC** | ≥ 0.75 | ≥ 0.80 | 區分能力 |
| **Precision** | ≥ 0.70 | ≥ 0.75 | 陽性預測值 |
| **Recall** | ≥ 0.70 | ≥ 0.75 | 敏感度 |
| **F1-Score** | ≥ 0.70 | ≥ 0.75 | 綜合指標 |

**特徵工程驗證**：
- Δ 特徵的加入應使 AUC 提升 **≥ 3%**
- 至少 1 個 Δ 特徵出現在 Top 10 重要特徵中

**模型比較**：
- 至少比較 **6 種**不同類型的模型
- 最佳模型與最差模型的 AUC 差異應 **≥ 5%**

### 5.2 定性標準

**可解釋性**：
- ✅ 能清楚解釋前 10 個最重要的特徵
- ✅ 提供 SHAP 或 Feature Importance 分析
- ✅ 識別可操作的臨床風險因子

**臨床可用性**：
- ✅ 預測結果能轉化為臨床建議
- ✅ 計算成本低（可在一般電腦執行）
- ✅ 僅需常規健檢項目（無需特殊檢驗）

**研究完整性**：
- ✅ 所有實驗可重現
- ✅ 完整的實驗記錄與文檔
- ✅ 開源程式碼與資料（在允許範圍內）

---

## 6. 研究貢獻 (Expected Contributions)

### 6.1 學術貢獻

1. **特徵工程創新** ⭐⭐⭐⭐⭐
   - 首次系統性驗證縱向變化量特徵（Δ features）在三高預測的價值
   - 與 Dual Framework 2025 論文的 δ-FPG 概念呼應
   - 可推廣至其他慢性疾病預測

2. **全面模型比較** ⭐⭐⭐⭐
   - 6+ 種模型的系統性評估
   - 涵蓋傳統統計到深度學習
   - 提供模型選擇的實證指引

3. **多任務學習探索** ⭐⭐⭐
   - 驗證 MTL 在多疾病預測的效果
   - 發現三高疾病的共享風險因子

### 6.2 應用貢獻

1. **早期預警系統**
   - 可部署於健檢中心
   - 自動標註高風險個體
   - 提供個人化預防建議

2. **臨床決策支持**
   - 識別可干預的風險因子
   - 輔助醫師判斷
   - 提升健康管理效率

3. **公共衛生價值**
   - 降低三高疾病的發生率
   - 減少醫療支出
   - 提升國民健康水平

### 6.3 方法論貢獻

1. **可重現研究**
   - 完整的程式碼與文檔
   - 詳細的實驗記錄
   - 可作為教學範例

2. **開源工具**
   - 縱向資料處理流程
   - 多模型比較框架
   - 可解釋性分析工具

---

## 7. 研究挑戰 (Challenges)

### 7.1 資料挑戰

**類別極度不平衡**：
- 高血糖：5.53%（335/6,056）
- 高血脂：5.96%（361/6,056）
- 高血壓相對較好：16.68%（1,010/6,056）

**解決策略**：
- SMOTE 過採樣
- Class Weight 調整
- 集成學習方法

**時間間隔不一致**：
- 不同受檢者的健檢時間間隔不同
- 可能影響 Δ 特徵的可比性

**解決策略**：
- 將時間間隔納入特徵
- 標準化變化量（除以時間間隔）
- 敏感度分析

### 7.2 模型挑戰

**過擬合風險**：
- 樣本數相對有限（6,056）
- 特徵數較多（26 個）
- 模型複雜度高（ANN, GP）

**解決策略**：
- Cross-Validation
- Regularization
- Early Stopping

**模型選擇困難**：
- 可解釋性 vs 性能的權衡
- 不同疾病可能適合不同模型
- 需要系統性比較

**解決策略**：
- 多指標評估
- 集成學習
- 針對不同應用場景選擇模型

### 7.3 評估挑戰

**評估指標選擇**：
- 類別不平衡下 Accuracy 不可靠
- Precision-Recall 權衡
- 臨床成本考量

**解決策略**：
- 使用 AUC-ROC 作為主要指標
- 同時報告 Precision, Recall, F1
- ROC 曲線完整分析

**外部驗證困難**：
- 缺乏其他公開資料集
- 難以驗證泛化能力

**解決策略**：
- 嚴格的內部驗證（K-Fold CV）
- 保留獨立測試集
- 穩定性分析（多次隨機分割）

---

## 8. 研究假設 (Hypotheses)

### 假設 1: 縱向變化特徵的優勢
**H1**: 加入縱向變化量特徵（Δ features）後，模型的預測性能將顯著優於僅使用單時間點特徵的模型（AUC 提升 ≥ 3%）。

**理論依據**：
- 慢性疾病的發展是一個動態過程
- 健康狀態的變化趨勢比單點數值更具預測價值
- Dual Framework 2025 證實 δ-FPG 重要性達 100%

### 假設 2: 模型性能差異
**H2**: 樹模型（RF, XGBoost）在三高預測任務中的性能將優於傳統統計模型（LR）和簡單模型（DT）。

**理論依據**：
- 樹模型能自動捕捉非線性關係
- 特徵交互作用對慢性疾病預測重要
- 相關文獻（Liu 2024, Dual 2025）支持

### 假設 3: 多任務學習的效果
**H3**: Multi-Task Learning（MTL）架構在同時預測三高疾病時，性能將不低於分別訓練三個獨立模型。

**理論依據**：
- 三高疾病具有共同的代謝風險因子
- MTL 可學習共享特徵表示
- 有助於緩解類別不平衡問題

### 假設 4: 特徵重要性排序
**H4**: 基線血糖（FBG_Y-1）和血糖變化量（Δ FBG）將是高血糖預測的前兩大重要特徵；類似地，血壓相關特徵對高血壓、血脂相關特徵對高血脂具有最高重要性。

**理論依據**：
- 疾病特異性預測因子
- 臨床經驗與專業知識
- Domain knowledge

### 假設 5: 時間點選擇策略
**H5**: 使用後三次健檢資料將比前三次產生更平衡的資料集，但前三次更適合早期預警場景。

**理論依據**：
- 後期檢驗更可能出現異常
- 前期檢驗捕捉早期風險信號
- 應用場景決定策略選擇

---

## 9. 關鍵名詞定義 (Key Definitions)

### 9.1 疾病定義

**三高疾病 (Three Highs / Metabolic Syndrome Components)**
- 高血壓（Hypertension）
- 高血糖（Hyperglycemia）
- 高血脂（Dyslipidemia）

### 9.2 資料相關

**縱向資料 (Longitudinal Data)**
- 對同一受試者在多個時間點重複測量的資料

**時間點 (Time Point)**
- Y-2: 基線（Baseline），第一次健檢
- Y-1: 追蹤（Follow-up），第二次健檢
- Y: 預測目標（Target），第三次健檢

**變化量特徵 (Delta Features / Δ Features)**
- 定義：Δ = Y-1 - Y-2
- 捕捉健康狀態的動態變化
- 例：Δ FBG = FBG_Y-1 - FBG_Y-2

### 9.3 模型相關

**多任務學習 (Multi-Task Learning, MTL)**
- 同時訓練多個相關任務的機器學習方法
- 本研究：同時預測高血壓、高血糖、高血脂

**可解釋性 (Interpretability)**
- 模型預測結果的可理解程度
- 方法：Feature Importance, SHAP, LIME

**類別不平衡 (Class Imbalance)**
- 陽性樣本（疾病）遠少於陰性樣本（健康）
- 本研究面臨嚴重不平衡（< 6%）

---

## 10. 相關文獻 (Related Work)

### 10.1 核心參考文獻

1. **Dual Framework 2025** (最相關 ⭐⭐⭐⭐⭐)
   - 標題：Dual Machine Learning Framework for Predicting Long-Term Glycemic Change and Prediabetes Risk
   - 貢獻：δ-FPG 特徵工程、SHAP 可解釋性
   - 與本研究關聯：特徵工程方法直接可借鑑

2. **Liu et al. 2024** (台中榮總研究)
   - 標題：Diabetes Prediction Using Machine Learning
   - 貢獻：台灣本土資料、XGBoost 優勢
   - 與本研究關聯：相同疾病、相似方法

3. **Taiwan MTL 2024** (多任務學習)
   - 標題：Multi-Task Learning for Disease Prediction
   - 貢獻：MTL 架構設計、Attention 機制
   - 與本研究關聯：可借鑑 MTL 架構

### 10.2 研究缺口 (Research Gap)

本研究填補的缺口：
1. ✅ **縱向變化特徵**：系統性驗證 Δ features 在三高預測的價值
2. ✅ **全面模型比較**：涵蓋 6+ 種模型，從傳統到深度學習
3. ✅ **多疾病同時預測**：探索 MTL 在三高預測的應用
4. ✅ **可解釋性重視**：平衡性能與可解釋性

---

## 11. 預期影響 (Expected Impact)

### 11.1 短期影響（1-2 年）

**學術層面**：
- 發表碩士論文
- 投稿會議論文（如 IEEE BIBM, AMIA）
- 建立開源專案

**應用層面**：
- 完成預測系統原型
- 與健檢中心合作測試
- 收集實際應用反饋

### 11.2 中期影響（3-5 年）

**學術層面**：
- 投稿期刊論文（如 JMIR, JAMIA）
- 擴展至其他慢性疾病
- 發展時間序列深度學習方法

**應用層面**：
- 系統部署於多家健檢中心
- 累積預測結果的驗證資料
- 與電子病歷系統整合

### 11.3 長期影響（5 年以上）

**學術層面**：
- 成為慢性疾病預測的標準方法
- 推廣至國際資料集
- 影響臨床指引制定

**應用層面**：
- 大規模公共衛生應用
- 降低三高疾病發生率
- 節省醫療資源

---

## 12. 時程規劃 (Timeline)

### Phase 1: 資料處理與探索（已完成）
- ✅ 資料清理與前處理
- ✅ 探索性資料分析（EDA）
- ✅ 特徵工程設計

### Phase 2: 基礎模型訓練（進行中）
- ✅ LR, DT, RF 訓練
- ✅ XGBoost, ANN 訓練
- ⏳ GP 實作與訓練

### Phase 3: 進階方法（未來 2-3 個月）
- ⏳ Multi-Task Learning
- ⏳ 集成學習
- ⏳ SHAP 可解釋性分析

### Phase 4: 實驗驗證（未來 1-2 個月）
- ⏳ 前 vs 後三次實驗
- ⏳ 檢驗次數影響實驗
- ⏳ 敏感度分析

### Phase 5: 論文撰寫（未來 2-3 個月）
- ⏳ 整理實驗結果
- ⏳ 撰寫論文各章節
- ⏳ 投稿與修改

---

## 13. 參考文獻 (References)

1. Dual Framework 2025. *Diagnostics*, 15(19), 2507.
2. Liu et al. 2024. *Journal of Healthcare Engineering*.
3. Taiwan MTL 2024. *Conference Proceedings*.
4. [其他文獻待補充]

---

**最後更新**: 2025-11-24
**下次檢視**: Meeting 17 後
**負責人**: 紀伯喬